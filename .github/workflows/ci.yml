name: test

on: [ push, pull_request ]

jobs:
  build:
    name: Verify
    uses: apache/maven-gh-actions-shared/.github/workflows/maven-verify.yml@v3
    with:
      jdk-matrix: '["17"]'
      ff-jdk: '17'
      ff-os: 'ubuntu-22.04'
      ff-site-run: false
      ff-goal: '-Plocal-testing,!standard-with-extra-repos -D"log4j.configurationFile"="$GITHUB_WORKSPACE/ci/log4j2.xml" verify'
      verify-goal: '-P !standard-with-extra-repos verify'
      failure-upload-path: |
        ./**/surefire-reports
        ./**/failsafe-reports
        ./**/screenshots
        ./**/*error*.log
        ./**/*test.log
      matrix-exclude: >
        [
          {"os": "macOS-latest"}
        ]

