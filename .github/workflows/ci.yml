name: test

on: [ push, pull_request ]

jobs:
  build:
    name: Verify
    uses: apache/maven-gh-actions-shared/.github/workflows/maven-verify.yml@v3
    with:
      ff-os: 'ubuntu-20.04'
      ff-jdk-distribution: 'adopt'
      ff-site-goal: ''
      ff-goal: '-Plocal-testing,!standard-with-extra-repos -Dlog4j.configurationFile=$PWD/ci/log4j2.xml verify'
      verify-goal: '-P !standard-with-extra-repos -Dlog4j.configurationFile=$PWD/ci/log4j2.xml verify'
      failure-upload-path: |
        ./**/surefire-reports
        ./**/failsafe-reports
        ./**/screenshots
        ./**/*error*.log
        ./**/*test.log
      matrix-exclude: >
        [
          {"os": "macOS-latest"},
          {"jdk": ["8"]}
        ]

